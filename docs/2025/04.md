# 04/01

`Raycast`を今まで1%くらいしか使ってなかったので色々調べてみた
良さそうな気もするので`Raycast Pro`で遊んでみることにした

とりあえず、以下の`To Japanese`と`To English`入れてみた
https://zenn.dev/ryo_kawamata/articles/a75bcceeff9e7b

`Raycast AI`の翻訳あればいらん気がしてきたので`DeepL`解約した
ページの全体翻訳は`Arc`でできるし

ということで今日も引き続きテストの勉強

## <第6章> カバレッジレポートの読み方

### 6-1. カバレッジレポートの概要

- 「テスト実行によって対象コードのどのくらいの範囲が実行されたか」を計測し出力されるレポート
- `Jest`だと`--coberage`オプションを付与して実行すればいい
  ```sh
  npx jest --coverage
  ```

#### カバレッジレポートの構成

| File         | Stmts      | Branch     | Funcs      | Lines    | Uncovered Line     |
| ------------ | ---------- | ---------- | ---------- | -------- | ------------------ |
| ファイル名称 | 命令網羅率 | 分岐網羅率 | 関数網羅率 | 行網羅率 | 網羅されていない行 |

- Stmts（命令網羅率）
  - 「すべてのステートメント（命令）」が少なくとも1回実行されたか
- Branch（分岐網羅率）
  - 「すべての条件分岐」が少なくとも1回通過したか
  - if文やcase文、三項演算子の分岐が対象
- Funcs（関数網羅率）
  - 「すべての関数」が少なくとも1回呼び出されたか
  - プロジェクトで利用されていないが、exportされている関数を発見するのに役立つ
- Lines（行網羅率）
  - 「すべての行」を少なくとも1回通過したか

### 6-2. カバレッジレポートの読み方

- CLIのレポートだけでなく、Jestは標準でHTMLレポートを出力する
  - ※ `jest.config.ts`に記載が必要

<!-- prettier-ignore -->
> [!note]
> カバレッジを上げるためのコツは、「呼び出しを通過しているか」と「分岐を通過しているか」の2点を意識してテストを書くこと

<!-- prettier-ignore -->
> [!warning]
> - 数値が高いからといって品質の高いテストであるとは限らない
> - テスト実行時に通過したかどうかの判定にとどまるので、バグがないことを証明するものではない
> - しかし、カバレッジが低いファイルはテスト不足の証拠なので、テストを追加で書くべきかの検討材料にはなる

### 6-3. カスタムレポーター

- テストの実行結果は、様々なレポーターを通して確認できる
  - `jest.config`の`reporters`で設定
  - ex.) `jest-html-reporters`は、テストの実行結果をグラフで表示してくれる
  - 他にも`GitHub`でテストが失敗した箇所にコメントをつけてくれるレポーターもあるらしい
    - https://github.com/jest-community/awesome-jest/blob/main/README.md#reporters

> 他にも`GitHub`でテストが失敗した箇所にコメントをつけてくれるレポーターもあるらしい

2025年現在、これはレポーターでやるのが良いのだろうか、なんか`GitHub Actions`とかでも転がってそうだけど
